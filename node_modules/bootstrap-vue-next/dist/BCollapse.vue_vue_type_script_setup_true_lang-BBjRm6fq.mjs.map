{"version":3,"file":"BCollapse.vue_vue_type_script_setup_true_lang-BBjRm6fq.mjs","sources":["../src/components/BCollapse/BCollapse.vue"],"sourcesContent":["<template>\n  <slot name=\"header\" v-bind=\"sharedSlots\" />\n  <Transition\n    v-if=\"renderRef || contentShowing\"\n    v-bind=\"transitionProps\"\n    :enter-active-class=\"computedNoAnimation ? '' : 'collapsing'\"\n    :leave-active-class=\"computedNoAnimation ? '' : 'collapsing'\"\n    :appear=\"modelValue\"\n  >\n    <component\n      :is=\"props.tag\"\n      v-show=\"showRef\"\n      :id=\"computedId\"\n      ref=\"_element\"\n      class=\"collapse\"\n      :class=\"computedClasses\"\n      :is-nav=\"props.isNav\"\n      v-bind=\"$attrs\"\n    >\n      <slot v-if=\"contentShowing\" v-bind=\"sharedSlots\" />\n    </component>\n  </Transition>\n  <slot name=\"footer\" v-bind=\"sharedSlots\" />\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  computed,\n  type EmitFn,\n  inject,\n  onBeforeUnmount,\n  provide,\n  readonly,\n  toRef,\n  useTemplateRef,\n} from 'vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport {collapseInjectionKey, globalCollapseStorageInjectionKey} from '../../utils/keys'\nimport type {BCollapseProps} from '../../types/ComponentProps'\nimport {BvTriggerableEvent} from '../../utils'\nimport {useShowHide} from '../../composables/useShowHide'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst _props = withDefaults(defineProps<Omit<BCollapseProps, 'modelValue'>>(), {\n  horizontal: false,\n  id: undefined,\n  initialAnimation: false,\n  isNav: false,\n  lazy: false,\n  noAnimation: false,\n  unmountLazy: false,\n  tag: 'div',\n  show: false,\n  visible: false,\n})\n\nconst props = useDefaults(_props, 'BCollapse')\n\nconst emit = defineEmits<{\n  'hidden': [value: BvTriggerableEvent]\n  'hide': [value: BvTriggerableEvent]\n  'hide-prevented': [value: BvTriggerableEvent]\n  'show': [value: BvTriggerableEvent]\n  'show-prevented': [value: BvTriggerableEvent]\n  'shown': [value: BvTriggerableEvent]\n  'toggle': [value: BvTriggerableEvent]\n}>()\n\ntype SharedSlotsData = {\n  hide: () => void\n  id: string\n  show: () => void\n  toggle: () => void\n  visible: boolean\n}\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: SharedSlotsData) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  footer?: (props: SharedSlotsData) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  header?: (props: SharedSlotsData) => any\n}>()\n\nconst modelValue = defineModel<Exclude<BCollapseProps['modelValue'], undefined>>({\n  default: false,\n})\n\nconst computedId = useId(() => props.id, 'collapse')\n\nconst element = useTemplateRef<HTMLElement>('_element')\n\nlet inCollapse = false\nconst onEnter = (el: Element) => {\n  inCollapse = true\n  requestAnimationFrame(() => {\n    if (props.horizontal) {\n      ;(el as HTMLElement).style.width = `${(el as HTMLElement).scrollWidth}px`\n    } else {\n      ;(el as HTMLElement).style.height = `${(el as HTMLElement).scrollHeight}px`\n    }\n  })\n}\nconst onBeforeLeave = (el: Element) => {\n  if (inCollapse) {\n    return\n  }\n  if (props.horizontal) {\n    ;(el as HTMLElement).style.width = `${el.scrollWidth}px`\n  } else {\n    ;(el as HTMLElement).style.height = `${el.scrollHeight}px`\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  ;(el as HTMLElement).offsetHeight // force reflow\n}\nconst onLeave = (el: Element) => {\n  requestAnimationFrame(() => {\n    if (props.horizontal) {\n      ;(el as HTMLElement).style.width = ``\n    } else {\n      ;(el as HTMLElement).style.height = ``\n    }\n  })\n}\n\nconst onAfterEnter = (el: Element) => {\n  ;(el as HTMLElement).style.height = ``\n  ;(el as HTMLElement).style.width = ``\n  inCollapse = false\n}\n\nconst onAfterLeave = (el: Element) => {\n  ;(el as HTMLElement).style.height = ``\n  ;(el as HTMLElement).style.width = ``\n  inCollapse = false\n}\n\nconst {\n  showRef,\n  renderRef,\n  hide,\n  show,\n  toggle,\n  isActive,\n  computedNoAnimation,\n  contentShowing,\n  transitionProps,\n} = useShowHide(modelValue, props, emit as EmitFn, element, computedId, {\n  // addShowClass: false,\n  transitionProps: {\n    onBeforeLeave,\n    onEnter,\n    onLeave,\n    onAfterEnter,\n    onAfterLeave,\n    enterToClass: '',\n    leaveToClass: '',\n    enterFromClass: '',\n    leaveFromClass: '',\n    enterActiveClass: '',\n    leaveActiveClass: '',\n  },\n})\n\nconst computedClasses = computed(() => ({\n  'show': isActive.value,\n  'navbar-collapse': props.isNav,\n  'collapse-horizontal': props.horizontal,\n}))\n\nconst sharedSlots = computed<SharedSlotsData>(() => ({\n  toggle,\n  show,\n  hide,\n  id: computedId.value,\n  visible: showRef.value,\n}))\n\ndefineExpose({\n  hide,\n  isNav: props.isNav,\n  show,\n  toggle,\n  visible: readonly(showRef),\n})\n\nprovide(collapseInjectionKey, {\n  id: computedId,\n  hide,\n  show,\n  toggle,\n  visible: readonly(showRef),\n  isNav: toRef(() => props.isNav),\n})\n\nconst appRegistry = inject(\n  globalCollapseStorageInjectionKey,\n  undefined\n)?.({\n  id: computedId.value,\n  toggle,\n  value: readonly(showRef),\n})\n\nonBeforeUnmount(() => {\n  appRegistry?.unregister()\n})\n</script>\n"],"names":["_useModel"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,UAAM,SAAS;AAaT,UAAA,QAAQ,YAAY,QAAQ,WAAW;AAE7C,UAAM,OAAO;AA2BP,UAAA,aAAaA,SAElB,SAAA,YAAA;AAED,UAAM,aAAa,MAAM,MAAM,MAAM,IAAI,UAAU;AAE7C,UAAA,UAAU,eAA4B,UAAU;AAEtD,QAAI,aAAa;AACX,UAAA,UAAU,CAAC,OAAgB;AAClB,mBAAA;AACb,4BAAsB,MAAM;AAC1B,YAAI,MAAM,YAAY;AAClB,aAAmB,MAAM,QAAQ,GAAI,GAAmB,WAAW;AAAA,QAAA,OAChE;AACH,aAAmB,MAAM,SAAS,GAAI,GAAmB,YAAY;AAAA,QAAA;AAAA,MACzE,CACD;AAAA,IACH;AACM,UAAA,gBAAgB,CAAC,OAAgB;AACrC,UAAI,YAAY;AACd;AAAA,MAAA;AAEF,UAAI,MAAM,YAAY;AAClB,WAAmB,MAAM,QAAQ,GAAG,GAAG,WAAW;AAAA,MAAA,OAC/C;AACH,WAAmB,MAAM,SAAS,GAAG,GAAG,YAAY;AAAA,MAAA;AAGtD,SAAmB;AAAA,IACvB;AACM,UAAA,UAAU,CAAC,OAAgB;AAC/B,4BAAsB,MAAM;AAC1B,YAAI,MAAM,YAAY;AAClB,aAAmB,MAAM,QAAQ;AAAA,QAAA,OAC9B;AACH,aAAmB,MAAM,SAAS;AAAA,QAAA;AAAA,MACtC,CACD;AAAA,IACH;AAEM,UAAA,eAAe,CAAC,OAAgB;AAClC,SAAmB,MAAM,SAAS;AAClC,SAAmB,MAAM,QAAQ;AACtB,mBAAA;AAAA,IACf;AAEM,UAAA,eAAe,CAAC,OAAgB;AAClC,SAAmB,MAAM,SAAS;AAClC,SAAmB,MAAM,QAAQ;AACtB,mBAAA;AAAA,IACf;AAEM,UAAA;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,IACE,YAAY,YAAY,OAAO,MAAgB,SAAS,YAAY;AAAA;AAAA,MAEtE,iBAAiB;AAAA,QACf;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,cAAc;AAAA,QACd,cAAc;AAAA,QACd,gBAAgB;AAAA,QAChB,gBAAgB;AAAA,QAChB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MAAA;AAAA,IACpB,CACD;AAEK,UAAA,kBAAkB,SAAS,OAAO;AAAA,MACtC,QAAQ,SAAS;AAAA,MACjB,mBAAmB,MAAM;AAAA,MACzB,uBAAuB,MAAM;AAAA,IAAA,EAC7B;AAEI,UAAA,cAAc,SAA0B,OAAO;AAAA,MACnD;AAAA,MACA;AAAA,MACA;AAAA,MACA,IAAI,WAAW;AAAA,MACf,SAAS,QAAQ;AAAA,IAAA,EACjB;AAEW,aAAA;AAAA,MACX;AAAA,MACA,OAAO,MAAM;AAAA,MACb;AAAA,MACA;AAAA,MACA,SAAS,SAAS,OAAO;AAAA,IAAA,CAC1B;AAED,YAAQ,sBAAsB;AAAA,MAC5B,IAAI;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAS,SAAS,OAAO;AAAA,MACzB,OAAO,MAAM,MAAM,MAAM,KAAK;AAAA,IAAA,CAC/B;AAED,UAAM,eAAc;AAAA,MAClB;AAAA,MACA;AAAA,IAAA,MAFkB,mBAGhB;AAAA,MACF,IAAI,WAAW;AAAA,MACf;AAAA,MACA,OAAO,SAAS,OAAO;AAAA,IAAA;AAGzB,oBAAgB,MAAM;AACpB,iDAAa;AAAA,IAAW,CACzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}