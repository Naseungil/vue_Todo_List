"use strict";const e=require("vue"),l=require("./classes-CXBJXuVd.js"),n=require("./index-CSe17yC0.js"),a=require("./index-BqHkgtNq.js"),o={name:"fade",enterActiveClass:"",enterFromClass:"showing",enterToClass:"",leaveActiveClass:"",leaveFromClass:"",leaveToClass:"showing",css:!0};exports.useShowHide=(t,r,i,u,v,s={transitionProps:{},showFn:()=>{},hideFn:()=>{}})=>{let d=!1;const c=!!t.value&&!r.initialAnimation||r.visible||!1,f=e.ref(c),p=e.ref(c),m=e.ref(c);let h="boolean"!=typeof t.value;e.watch(t,(()=>{h="boolean"!=typeof t.value,d?d=!1:t.value?y():F()}));const g=e.ref(c),A=e.ref(!1),w=e.computed((()=>r.noAnimation||r.noFade||g.value||!1));e.onMounted((()=>{r.visible||!r.show&&c?(g.value=!0,t.value||(d=!0,t.value=!0),e.nextTick((()=>{C.value=!0,R.value=!0,j.value=!0,y()}))):(r.show||t.value&&r.initialAnimation)&&y()})),e.watch((()=>r.visible),(l=>{g.value=!0,e.nextTick((()=>{l&&(C.value=!0),l?y():F()}))})),e.watch((()=>r.show),(e=>{e?y():F()})),n.useEventListener(u,"bv-toggle",(()=>{t.value=!t.value}));const b=(e,n={})=>new l.BvTriggerableEvent(e,{cancelable:!1,target:(null==u?void 0:u.value)||null,relatedTarget:null,trigger:null,...n,componentId:null==v?void 0:v.value});let P;const y=()=>{if(f.value)return;const l=b("show",{cancelable:!0});if(i("show",l),l.defaultPrevented)return i("show-prevented",b("show-prevented")),C.value&&(C.value=!1),void(t.value&&!h&&(d=!0,e.nextTick((()=>{t.value=!1}))));p.value=!0,m.value=!0,requestAnimationFrame((()=>{var l;P=setTimeout((()=>{var l;f.value=!0,null==(l=s.showFn)||l.call(s),t.value||(d=!0,e.nextTick((()=>{t.value=!0})))}),g.value?0:"number"==typeof r.delay?r.delay:(null==(l=r.delay)?void 0:l.show)||0)}))},F=l=>{var n;if(!f.value)return;const a=b("hide",{cancelable:!0,trigger:l}),o=b(l||"ignore",{cancelable:!0,trigger:l});if("backdrop"===l&&r.noCloseOnBackdrop||"esc"===l&&r.noCloseOnEsc)i("hide-prevented",b("hide-prevented"));else{if(P&&(clearTimeout(P),P=void 0),l&&i(l,o),i("hide",a),a.defaultPrevented||o.defaultPrevented)return i("hide-prevented",b("hide-prevented")),d=!0,void e.nextTick((()=>{t.value=!0}));setTimeout((()=>{var e;k.value=!0,f.value=!1,null==(e=s.hideFn)||e.call(s),t.value&&(d=!0,t.value=!!h&&0)}),g.value?0:"number"==typeof r.delay?r.delay:(null==(n=r.delay)?void 0:n.hide)||0)}},T=a.useThrottleFn((e=>F(e)),500),L=a.useThrottleFn((()=>y()),500),E=e.ref(!1),q=()=>{!0===r.lazy&&(E.value=!0)},k=e.ref(!1),B=e.ref(!1),C=e.ref(!1),x=e.computed((()=>!0===A.value||!0===B.value||!1===r.lazy||!0===r.lazy&&!0===E.value&&!1===r.unmountLazy)),z=e.ref(!1);e.watch(C,(e=>{setTimeout((()=>{z.value=e}),32)}));const R=e.ref(!1),j=e.ref(!1),H={...s.transitionProps,onBeforeEnter:e=>{var l,n,a,o;null==(n=null==(l=s.transitionProps)?void 0:l.onBeforeEnter)||n.call(l,e),null==(o=null==(a=r.transitionProps)?void 0:a.onBeforeEnter)||o.call(a,e),B.value=!0},onEnter:e=>{var l,n,a,o;requestAnimationFrame((()=>{requestAnimationFrame((()=>{C.value=!0}))})),null==(n=null==(l=s.transitionProps)?void 0:l.onEnter)||n.call(l,e),null==(o=null==(a=r.transitionProps)?void 0:a.onEnter)||o.call(a,e)},onAfterEnter:e=>{var l,n,a,o;i("shown",b("shown")),q(),null==(n=null==(l=s.transitionProps)?void 0:l.onAfterEnter)||n.call(l,e),null==(o=null==(a=r.transitionProps)?void 0:a.onAfterEnter)||o.call(a,e),g.value&&requestAnimationFrame((()=>{g.value=!1})),A.value&&(A.value=!1)},onBeforeLeave:e=>{var l,n,a,o;k.value||(k.value=!0),null==(n=null==(l=s.transitionProps)?void 0:l.onBeforeLeave)||n.call(l,e),null==(o=null==(a=r.transitionProps)?void 0:a.onBeforeLeave)||o.call(a,e)},onLeave:e=>{var l,n,a,o;C.value=!1,null==(n=null==(l=s.transitionProps)?void 0:l.onLeave)||n.call(l,e),null==(o=null==(a=r.transitionProps)?void 0:a.onLeave)||o.call(a,e)},onAfterLeave:e=>{var l,n,a,o;i("hidden",b("hidden")),null==(n=null==(l=s.transitionProps)?void 0:l.onAfterLeave)||n.call(l,e),null==(o=null==(a=r.transitionProps)?void 0:a.onAfterLeave)||o.call(a,e),k.value=!1,B.value=!1,g.value&&requestAnimationFrame((()=>{g.value=!1})),requestAnimationFrame((()=>{A.value||(p.value=!1)}))}};return{showRef:f,renderRef:p,renderBackdropRef:m,isVisible:C,isActive:B,trapActive:z,show:y,hide:F,toggle:()=>{const e=b("toggle",{cancelable:!0});i("toggle",e),e.defaultPrevented?i("toggle-prevented",b("toggle-prevented")):f.value?F():y()},throttleHide:T,throttleShow:L,buildTriggerableEvent:b,computedNoAnimation:w,localNoAnimation:g,localTemporaryHide:A,isLeaving:k,transitionProps:{...o,...r.transitionProps,...H},lazyLoadCompleted:E,markLazyLoadCompleted:q,contentShowing:x,backdropReady:j,backdropVisible:R,backdropTransitionProps:{...o,onBeforeEnter:()=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{R.value=!0}))})),j.value=!1},onAfterEnter:()=>{j.value=!0},onBeforeLeave:()=>{R.value=!1},onAfterLeave:()=>{j.value=!1,requestAnimationFrame((()=>{m.value=!1}))}}}};
//# sourceMappingURL=useShowHide-CK93wwAA.js.map
