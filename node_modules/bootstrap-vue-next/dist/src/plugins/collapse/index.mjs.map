{"version":3,"file":"index.mjs","sources":["../../../../src/plugins/collapse/index.ts"],"sourcesContent":["import {computed, type Plugin, reactive, readonly} from 'vue'\nimport {\n  globalCollapseStorageInjectionKey,\n  type RegisterCollapseFnInput,\n  type RegisterCollapseValue,\n} from '../../utils/keys'\n\nexport const collapsePlugin: Plugin = {\n  install(app) {\n    const values: Record<string, {value: boolean; toggle: () => void}> = reactive({})\n\n    const fun = (({id, value, toggle}: RegisterCollapseFnInput) => {\n      values[id] = computed(() => ({value: value.value, toggle})) as unknown as {\n        value: boolean\n        toggle: () => void\n      }\n      return {\n        unregister() {\n          delete values[id]\n        },\n      }\n    }) as unknown as RegisterCollapseValue\n\n    fun.map = readonly(values)\n\n    app.provide(globalCollapseStorageInjectionKey, fun)\n  },\n}\n"],"names":[],"mappings":";;AAOO,MAAM,iBAAyB;AAAA,EACpC,QAAQ,KAAK;AACL,UAAA,SAA+D,SAAS,EAAE;AAEhF,UAAM,MAAO,CAAC,EAAC,IAAI,OAAO,aAAqC;AACtD,aAAA,EAAE,IAAI,SAAS,OAAO,EAAC,OAAO,MAAM,OAAO,OAAA,EAAQ;AAInD,aAAA;AAAA,QACL,aAAa;AACX,iBAAO,OAAO,EAAE;AAAA,QAAA;AAAA,MAEpB;AAAA,IACF;AAEI,QAAA,MAAM,SAAS,MAAM;AAErB,QAAA,QAAQ,mCAAmC,GAAG;AAAA,EAAA;AAEtD;"}